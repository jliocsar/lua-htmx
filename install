#!/bin/sh
DISTRO="linux-x64"

# Uncomment this to install necessary C libraries
# May need to change to your distro's package manager
# sudo apt install -y build-essential

# Uncomment this if you face any BSON/MongoDB related errors
# May need to change to your distro's package manager
# sudo apt install -y libbson-dev libmongoc-dev

# Uncomment this to install `inotify-tools`
# May need to change to your distro's package manager
# sudo apt install -y inotify-tools

# If you need to install mprocs, you can use this
# npm i -g mprocs

if [ ! -d "./5.4" ]; then
    echo "Installing localua"
    curl https://loadk.com/localua.sh -o localua
    chmod +x ./localua
    ./localua 5.4
    rm ./localua
fi

if [ ! -f "./tailwindcss" ]; then
    echo "Installing tailwindcss cli"
    curl -sLO https://github.com/tailwindlabs/tailwindcss/releases/latest/download/tailwindcss-$version
    chmod +x tailwindcss-$version
    mv tailwindcss-$version tailwindcss
fi

echo "Installing rocks from rockspec"
./5.4/bin/luarocks install --deps-only --local ./lua-htmx-dev-1.rockspec
